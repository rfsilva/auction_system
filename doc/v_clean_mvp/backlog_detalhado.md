# BACKLOG DETALHADO — SISTEMA DE LEILÃO ELETRÔNICO
> Tabelão completo com todos os itens do backlog consolidado.  
> Colunas: ID | Tipo | Tema | Épico | Título | Descrição detalhada | Critérios de Aceite | Prioridade

| ID | Tipo | Tema | Épico | Título | Descrição detalhada | Critérios de Aceite | Prioridade |
|----|------|------|-------|--------|---------------------|---------------------|-----------|
| H1-01 | História | Gestão de Usuários e Acesso | Cadastro e Identificação | Cadastro de Usuário | Visitante realiza cadastro com nome, email, senha, CPF/CNPJ (se aplicável), telefone e aceite de termos; validação inicial. | Conta criada com status `PENDING_VERIFICATION`; email de confirmação enviado; CPF/CNPJ com validação básica; senha armazenada com hash. | Must |
| H1-02 | História | Gestão de Usuários e Acesso | Cadastro e Identificação | Verificação de Duplicidade | Sistema valida se CPF/CNPJ/email já estão cadastrados e bloqueia duplicidade; fornece mensagens amigáveis. | Tentativa de cadastro com dados duplicados retorna 409 com mensagem clara; registro pré-existente listado no log de auditoria. | Must |
| H1-03 | História | Gestão de Usuários e Acesso | Perfis e Papéis | Atribuição de Papéis | Admin atribui papéis (Comprador, Vendedor, Admin) a usuários; regras de autorização aplicadas. | Papéis refletidos no token JWT; endpoints protegidos por RBAC; mudanças auditadas. | Must |
| H1-04 | História | Gestão de Usuários e Acesso | Perfis e Papéis | Gestão de Permissões | Definir e aplicar permissões por papel; endpoints validam autorização. | Testes de permissão cobrem cenários (visitante/comprador/vendedor/admin); endpoints retornam 403 quando não autorizado. | Must |
| H1-05 | História | Gestão de Usuários e Acesso | Documentação e KYC | Envio de Documentos | Participante (Comprador/Vendedor) envia documentos (RG/CNH/CNPJ/comprovante residência) via upload com versionamento. | Upload aceito; arquivo salvo no storage com metadata; registro `PENDING` em KYC; cópia disponível para admin; tamanho e tipo validados. | Must |
| H1-06 | História | Gestão de Usuários e Acesso | Documentação e KYC | Validação Manual | Admin revisa documentos e aprova/reprova; status refletido no perfil do usuário. | Fluxo de aprovação aplicado; notificações enviadas ao usuário; decisão auditada. | Must |
| H1-07 | História | Gestão de Usuários e Acesso | Login e Segurança | Autenticação | Login com email+senha; suporte a MFA (TOTP) e tokens JWT com refresh. | Login retorna access+refresh token; MFA configurável por usuário; bloqueio após X tentativas; logs de login. | Must |
| H1-08 | História | Gestão de Usuários e Acesso | Login e Segurança | Recuperação de Acesso | Processo de recuperação de senha via email com token expirável. | Token expira; alteração de senha requer token válido; evento auditado; email enviado. | Must |

| H2-01 | História | Gestão de Leilões | Cadastro de Leilões | Criar Leilão | Vendedor cria leilão definindo título, descrição, regras gerais, taxa aplicável, datas (start/end) e visibilidade. | Leilão criado em `DRAFT`; validação de campos; não publicado até aprovação (se configurado); registro em DB com audit. | Must |
| H2-02 | História | Gestão de Leilões | Cadastro de Leilões | Validar Datas | Regras de negócio que garantem startDate < endDate, duração mínima e que produto endDate ≤ lote endDate quando aplicável. | Tentativa inválida retorna 400 com motivos; logs e mensagem amigável; testes para diferentes fusos. | Must |
| H2-03 | História | Gestão de Leilões | Publicação e Visibilidade | Publicar Leilão | Fluxo de publicação (vendedor → revisão automática/manual → publicado); controla se é público ou privado. | Leilão muda para `PUBLISHED`; visibilidade respeitada; notificação enviada aos seguidores. | Must |
| H2-04 | História | Gestão de Leilões | Publicação e Visibilidade | Regras de Cancelamento | Regras de cancelamento: vendedor só antes do início; admin pode cancelar depois com justificativa; efeitos no histórico. | Cancelamento registra razão; notifica participantes; reposta de API confirma alteração; logs imutáveis. | Must |

| H3-01 | História | Gestão de Lotes | Cadastro de Lotes | Criar Lote | Vendedor cadastra lote associado ao leilão com título, descrição, produtos vinculados, loteEndDateTime e regras específicas. | Lote criado; produtos vinculados válidos; validações de prazo; notificação de criação. | Must |
| H3-02 | História | Gestão de Lotes | Cadastro de Lotes | Upload de Anexos | Upload seguro de PDFs/imagens/term-contracts com versão e hash. | Arquivos armazenados em storage (S3); hash SHA256 registrado; links expiram; tamanho/tipo validados. | Must |
| H3-03 | História | Gestão de Lotes | Edição e Manutenção | Editar Lote | Edição permitida enquanto leilão não iniciado; bloqueado após início; mudanças auditadas. | Tentativa de editar após início é rejeitada (403); histórico de versões mantido. | Must |
| H3-04 | História | Gestão de Lotes | Regras de Lote | Incremento e Preço | Definição de minIncrement, priceReserve, startingPrice por lote/produto; regra aplicada no motor de lances. | nextPrice calculado corretamente; validação no backend; UI exibe nextPrice. | Must |

| H4-01 | História | Participação e Disputa | Habilitação | Solicitar Habilitação | Comprador solicita habilitação (KYC) para participar do leilão; sistema registra solicitação. | Solicitação gerada; notificações; status `PENDING`; histórico. | Must |
| H4-02 | História | Participação e Disputa | Habilitação | Validar Habilitação | Admin ou processo automático valida/recusa habilitação; dependências no acesso a lances. | Status `VERIFIED`/`REJECTED`; logs; usuário notificado. | Must |
| H4-03 | História | Participação e Disputa | Lances | Enviar Lance | Comprador envia lance para produto específico; backend valida horário, incremento e autenticação; persistência append-only. | Lance aceito persiste como `ACCEPTED`; evento real-time broadcast; rejeições retornam motivo claro. | Must |
| H4-04 | História | Participação e Disputa | Lances | Validar Incremento | Motor valida `amount >= currentPrice + minIncrement` ou regras de proxy/auto-lance. | Rejeição com código `LOWER_THAN_MIN_INCREMENT` quando aplicável; testes unitários cobrindo arrendondamento. | Must |
| H4-05 | História | Participação e Disputa | Lances | Lance Automático | Comprador configura auto-lance (proxy bidding) com maxLimit; sistema compete automaticamente respeitando regras. | Auto-lance executa corretamente, respeita prioridade temporal e limites; notifica usuário de execução/derrota. | Should |
| H4-06 | História | Participação e Disputa | Encerramento | Determinar Vencedor | Ao encerrar (por produto ou lote), sistema define vencedor com maior lance; calcula taxa e frete estimado. | Vencedor salvo em Sale record; fee calculada com contract feeRate; frete estimado via API externa; invoice gerado. | Must |
| H4-07 | História | Participação e Disputa | Encerramento | Relatório de Disputa | Geração de relatório do cronograma de lances (timeline) e evidências para contestação. | PDF gerado com hash; armazenado e link expirável; logs de acesso. | Must |

| H5-01 | História | Pagamentos e Liquidação | Instruções | Enviar Instruções | Ao vencer, comprador recebe instruções de pagamento com prazo e métodos aceitos. | Mensagem entregues por email + painel; prazo correto mostrado; link para pagamento. | Must |
| H5-02 | História | Pagamentos e Liquidação | Liquidação | Confirmar Pagamento | Integração via webhook com gateway; atualização de status do pedido (PAID/PENDING/FAILED). | Webhook verifica assinatura; estados atualizados; notificação enviada; retry de webhook implementado. | Must |
| H5-03 | História | Pagamentos e Liquidação | Liquidação | Notificação de Atraso | Se não pago no prazo, sistema notifica e aplica regras (penalidade, oferta ao segundo). | Notificações em 24h/48h; regras de fallback (segunda proposta) executadas; logs. | Must |
| H5-04 | História | Pagamentos e Liquidação | Repasse ao Vendedor | Emissão de Comprovante | Gerar comprovante/fatura e calcular repasse líquido ao vendedor após taxas. | Comprovante com breakdown (valor, taxa, frete); repasse agendado; registro contábil. | Must |

| H6-01 | História | Regras de Negócio e Compliance | Filtros e Critérios | Regras de Habilitação | Regras para habilitação de compradores (idade, KYC, bloqueios). | Regras aplicadas automaticamente; bloqueios preventivos; audit trail. | Must |
| H6-02 | História | Regras de Negócio e Compliance | Regras de Lances | Lance Mínimo | Motor aceita apenas lances acima do mínimo definido por lote/produto. | Testes cobrindo cenários de rounding e multi-currency (se aplicável). | Must |
| H6-03 | História | Regras de Negócio e Compliance | Auditoria | Regras de Auditoria | Definição de quais operações são auditadas (lances, encerramentos, alterações de contrato). | Logs imutáveis armazenados; consultáveis por admin; retention policy aplicada. | Must |
| H6-04 | História | Regras de Negócio e Compliance | Antifraude | Validação de Padrões | Heurísticas para detectar manipulação (multi-contas, IP reuse, spikes). | Alertas gerados; soft-block e escalonamento para revisão; métricas de detecção. | Must |

| H7-01 | História | Auditoria e Relatórios | Trilhas | Log de Atividades | Registrar quem fez o quê, quando e com qual requestId; exportável. | Query de auditoria retorna timeline; export CSV/PDF; logs protegidos. | Must |
| H7-02 | História | Auditoria e Relatórios | Relatórios | Relatório Gerencial | Dashboards com KPIs: volume leilões, lances, receita, inadimplência. | Dashboards atualizados em near-real-time; filtros por data/vendedor/leilão. | Should |
| H7-03 | História | Auditoria e Relatórios | Relatórios | Relatório Legal | Exportação de dados conforme obrigações legais (fiscal/tribunária). | Export formatado; cobertura dos campos exigidos; logs de export. | Must |

| H8-01 | História | Segurança e Autorização | Autenticação | MFA | Implementar MFA TOTP para perfis críticos (vendedor/admin) e opcional para compradores. | MFA enrolment; login exige TOTP quando configurado; recovery flow. | Should |
| H8-02 | História | Segurança e Autorização | Autorização | RBAC | RBAC central que verifica permissões por endpoint e ação. | Matriz de permissão implementada; testes de permissão automatizados. | Must |
| H8-03 | História | Segurança e Autorização | Sessões | Controle de Sessão | Sessões expiram por timeout; refresh token seguro; logout invalidates tokens. | Tokens expirados bloqueiam acesso; refresh revoga old tokens; logs de sessão. | Must |

| H9-01 | História | Integrações | Bancos | API Bancária | Integração para consulta/reconciliação de pagamentos quando aplicável (banks/gateways). | Reconciliation matches payments to orders; discrepancies logged; retry policy. | Must |
| H9-02 | História | Integrações | Pagamentos | Gateway | Integração com gateway que suporta PIX, cartão e boleto; webhooks assinados. | Ordem criada; webhook validado; idempotency on webhooks; fallback de retry. | Must |
| H9-03 | História | Integrações | Documentos | Repositório | Armazenamento de documentos (S3) com versionamento, expiração e hash. | Upload/download funcionando; links expiráveis; metadata presente. | Must |
| H9-04 | História | Integrações | Analytics | Observabilidade | Streaming de eventos (lance, leilão, pagamento) para analytics pipeline. | Eventos publicados (Kafka/queue); schema versioned; retries. | Should |

| H10-01 | História | Administração, Catálogos e Configs | Regras Operacionais | Regras Operacionais | Admin configura incrementos, prazos, taxas, políticas antifraude via painel. | Config dura em DB; aplicação imediata onde aplicável; audit trail. | Must |
| H10-02 | História | Administração, Catálogos e Configs | Catálogos | Gerenciar Categorias | CRUD de categorias e atributos aplicáveis a lotes/produtos. | CRUD com validação; categorização reflete no search/index. | Should |
| H10-03 | História | Administração, Catálogos e Configs | Painel | Painel Administrativo | Painel para operações: KYC, moderação, logs, métricas e ações manuais. | RBAC aplicado; actions auditadas; performance aceitável. | Must |

| EN11-01 | Enabler | Enablers Arquiteturais | Arquitetura | BFF/Backend | Definição e implementação do BFF (ou API Gateway) + backend modularizado. | Documentação arquitetural; skeleton do BFF implementado; contratos OpenAPI. | Must |
| EN11-02 | Enabler | Enablers Arquiteturais | Arquitetura | Domain Model (DDD) | Modelagem de domínio para Leilões, Lotes, Lances, Usuários e Pagamentos. | Diagramas de domínio; entidades e agregados definidos; mapping para DB. | Must |
| EN11-03 | Enabler | Enablers Arquiteturais | CI/CD | Pipeline CI/CD | Pipelines para build, test, lint e deploy (GitHub Actions). | Pipeline executa testes; deploy para env de staging automatizado; rollback. | Must |
| EN11-04 | Enabler | Enablers Arquiteturais | Testes | Automação de Testes | Testes unitários, integração e end-to-end para fluxos críticos (lance, encerramento). | Coverage mínimo definido (ex: 70%); e2e que cobre fluxo de lance → encerramento. | Must |
| EN11-05 | Enabler | Enablers Arquiteturais | Observabilidade | Correlation-Id / Tracing | Implementar Correlation-Id e tracing distribuído (OpenTelemetry). | RequestId propagado; traces visíveis no APM; exemplos em doc. | Must |
| EN11-06 | Enabler | Enablers Arquiteturais | Logs | Logging Estruturado | Logs JSON com campos padronizados (timestamp, level, requestId, userId). | Logs indexáveis; alertas ligados a erros críticos; retenção configurada. | Must |
| EN11-07 | Enabler | Enablers Arquiteturais | Segurança | Hardening & Rate Limit | Implementar WAF, rate-limiting (especialmente em endpoints de lance) e OWASP hardening. | Simulação de ataques básicos; thresholds configuráveis; bloqueio e alertas. | Must |
| EN11-08 | Enabler | Enablers Arquiteturais | Monitoramento | APM & Telemetria | Configurar APM (traces, métricas) + dashboards (Grafana). | Dashboards com SLOs; alertas para SLAs violados; integração Prometheus. | Must |
| EN11-09 | Enabler | Enablers Arquiteturais | API | OpenAPI / Contratos | Padronizar e publicar contratos OpenAPI para todos os serviços. | Specs versionadas; linting no CI; mock server gerado. | Must |

