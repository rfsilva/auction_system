{
	"info": {
		"_postman_id": "produtos-collection-id",
		"name": "03 - Produtos",
		"description": "Collection para testes de gest√£o de produtos do sistema de leil√£o.\n\n**Funcionalidades cobertas:**\n- Listar produtos do vendedor\n- Buscar produto por ID\n- Criar novo produto\n- Atualizar produto existente\n- Publicar produto (DRAFT ‚Üí ACTIVE)\n- Excluir produto\n- Listar categorias dispon√≠veis\n\n**Dados de teste dispon√≠veis:**\n- Produtos ativos: Samsung Galaxy S23, Vaso Cer√¢mica, Dom Casmurro, etc.\n- Produtos em diferentes status: DRAFT, ACTIVE, SOLD, EXPIRED\n- Diferentes categorias: Eletr√¥nicos, Artesanatos, Livros, Instrumentos\n\n**Permiss√µes necess√°rias:** SELLER para opera√ß√µes de CRUD",
		"schema": "https://schema.getpostman.com/json/collection/v2.1.0/collection.json"
	},
	"item": [
		{
			"name": "Listar Meus Produtos",
			"event": [
				{
					"listen": "test",
					"script": {
						"exec": [
							"pm.test(\"Status code is 200\", function () {",
							"    pm.response.to.have.status(200);",
							"});",
							"",
							"pm.test(\"Response has paginated structure\", function () {",
							"    const jsonData = pm.response.json();",
							"    pm.expect(jsonData).to.have.property('success');",
							"    pm.expect(jsonData.success).to.be.true;",
							"    pm.expect(jsonData.data).to.have.property('content');",
							"    pm.expect(jsonData.data).to.have.property('totalElements');",
							"    pm.expect(jsonData.data).to.have.property('totalPages');",
							"});",
							"",
							"pm.test(\"Products have required fields\", function () {",
							"    const jsonData = pm.response.json();",
							"    if (jsonData.data.content.length > 0) {",
							"        const product = jsonData.data.content[0];",
							"        pm.expect(product).to.have.property('id');",
							"        pm.expect(product).to.have.property('title');",
							"        pm.expect(product).to.have.property('description');",
							"        pm.expect(product).to.have.property('initialPrice');",
							"        pm.expect(product).to.have.property('currentPrice');",
							"        pm.expect(product).to.have.property('status');",
							"        pm.expect(product).to.have.property('endDateTime');",
							"    }",
							"});"
						],
						"type": "text/javascript"
					}
				}
			],
			"request": {
				"method": "GET",
				"header": [
					{
						"key": "Authorization",
						"value": "Bearer {{authToken}}",
						"type": "text"
					},
					{
						"key": "Accept",
						"value": "{{acceptType}}",
						"type": "text"
					}
				],
				"url": {
					"raw": "{{baseUrl}}/api/produtos/meus?page=0&size=20",
					"host": [
						"{{baseUrl}}"
					],
					"path": [
						"api",
						"produtos",
						"meus"
					],
					"query": [
						{
							"key": "page",
							"value": "0"
						},
						{
							"key": "size",
							"value": "20"
						}
					]
				},
				"description": "Lista todos os produtos do vendedor logado."
			}
		},
		{
			"name": "Buscar Produto por ID",
			"event": [
				{
					"listen": "test",
					"script": {
						"exec": [
							"pm.test(\"Status code is 200\", function () {",
							"    pm.response.to.have.status(200);",
							"});",
							"",
							"pm.test(\"Product details are present\", function () {",
							"    const jsonData = pm.response.json();",
							"    pm.expect(jsonData).to.have.property('success');",
							"    pm.expect(jsonData.success).to.be.true;",
							"    pm.expect(jsonData.data).to.have.property('id');",
							"    pm.expect(jsonData.data).to.have.property('title');",
							"    pm.expect(jsonData.data).to.have.property('description');",
							"    pm.expect(jsonData.data).to.have.property('images');",
							"    pm.expect(jsonData.data).to.have.property('initialPrice');",
							"    pm.expect(jsonData.data).to.have.property('currentPrice');",
							"    pm.expect(jsonData.data).to.have.property('categoria');",
							"    pm.expect(jsonData.data).to.have.property('tags');",
							"});"
						],
						"type": "text/javascript"
					}
				}
			],
			"request": {
				"method": "GET",
				"header": [
					{
						"key": "Authorization",
						"value": "Bearer {{authToken}}",
						"type": "text"
					},
					{
						"key": "Accept",
						"value": "{{acceptType}}",
						"type": "text"
					}
				],
				"url": {
					"raw": "{{baseUrl}}/api/produtos/{{produtoId}}",
					"host": [
						"{{baseUrl}}"
					],
					"path": [
						"api",
						"produtos",
						"{{produtoId}}"
					]
				},
				"description": "Busca um produto espec√≠fico pelo ID."
			}
		},
		{
			"name": "Listar Categorias",
			"event": [
				{
					"listen": "test",
					"script": {
						"exec": [
							"pm.test(\"Status code is 200\", function () {",
							"    pm.response.to.have.status(200);",
							"});",
							"",
							"pm.test(\"Categories list is present\", function () {",
							"    const jsonData = pm.response.json();",
							"    pm.expect(jsonData).to.have.property('success');",
							"    pm.expect(jsonData.success).to.be.true;",
							"    pm.expect(jsonData.data).to.be.an('array');",
							"});",
							"",
							"pm.test(\"Categories include expected values\", function () {",
							"    const jsonData = pm.response.json();",
							"    const categories = jsonData.data;",
							"    pm.expect(categories).to.include('Eletr√¥nicos');",
							"    pm.expect(categories).to.include('Artesanatos');",
							"    pm.expect(categories).to.include('Livros');",
							"});"
						],
						"type": "text/javascript"
					}
				}
			],
			"request": {
				"method": "GET",
				"header": [
					{
						"key": "Accept",
						"value": "{{acceptType}}",
						"type": "text"
					}
				],
				"url": {
					"raw": "{{baseUrl}}/api/produtos/categorias",
					"host": [
						"{{baseUrl}}"
					],
					"path": [
						"api",
						"produtos",
						"categorias"
					]
				},
				"description": "Lista todas as categorias dispon√≠veis para produtos."
			}
		},
		{
			"name": "Criar Novo Produto",
			"event": [
				{
					"listen": "test",
					"script": {
						"exec": [
							"pm.test(\"Status code is 200 or 201\", function () {",
							"    pm.expect(pm.response.code).to.be.oneOf([200, 201]);",
							"});",
							"",
							"pm.test(\"Product created successfully\", function () {",
							"    const jsonData = pm.response.json();",
							"    pm.expect(jsonData).to.have.property('success');",
							"    pm.expect(jsonData.success).to.be.true;",
							"    pm.expect(jsonData.data).to.have.property('id');",
							"    pm.expect(jsonData.data.title).to.equal('Produto Teste Postman');",
							"    pm.expect(jsonData.data.initialPrice).to.equal(100);",
							"    pm.expect(jsonData.data.categoria).to.equal('Teste Postman');",
							"    pm.expect(jsonData.data.status).to.equal('DRAFT');",
							"    ",
							"    // Salvar ID do produto criado",
							"    pm.environment.set('novoProdutoId', jsonData.data.id);",
							"});"
						],
						"type": "text/javascript"
					}
				},
				{
					"listen": "prerequest",
					"script": {
						"exec": [
							"// Verificar se est√° logado como vendedor",
							"const authToken = pm.environment.get('authToken');",
							"if (!authToken) {",
							"    console.log('Token de autentica√ß√£o n√£o encontrado. Execute o login de vendedor primeiro.');",
							"}",
							"",
							"// Gerar data de encerramento (7 dias a partir de agora)",
							"const endDate = new Date();",
							"endDate.setDate(endDate.getDate() + 7);",
							"const endDateTime = endDate.toISOString();",
							"pm.environment.set('endDateTime', endDateTime);"
						],
						"type": "text/javascript"
					}
				}
			],
			"request": {
				"method": "POST",
				"header": [
					{
						"key": "Authorization",
						"value": "Bearer {{authToken}}",
						"type": "text"
					},
					{
						"key": "Content-Type",
						"value": "{{contentType}}",
						"type": "text"
					},
					{
						"key": "Accept",
						"value": "{{acceptType}}",
						"type": "text"
					}
				],
				"body": {
					"mode": "raw",
					"raw": "{\n    \"title\": \"Produto Teste Postman\",\n    \"description\": \"Produto de teste criado via Postman para valida√ß√£o da API. Este produto possui todas as caracter√≠sticas necess√°rias para testes completos do sistema de leil√£o.\",\n    \"images\": [\n        \"https://example.com/images/produto-teste-1.jpg\",\n        \"https://example.com/images/produto-teste-2.jpg\"\n    ],\n    \"weight\": 0.5,\n    \"dimensions\": \"20x15x10\",\n    \"initialPrice\": 100.00,\n    \"reservePrice\": 80.00,\n    \"incrementMin\": 5.00,\n    \"endDateTime\": \"{{endDateTime}}\",\n    \"categoria\": \"Teste Postman\",\n    \"tags\": [\"teste\", \"postman\", \"api\", \"validacao\"],\n    \"antiSnipeEnabled\": true,\n    \"antiSnipeExtension\": 300\n}"
				},
				"url": {
					"raw": "{{baseUrl}}/api/produtos",
					"host": [
						"{{baseUrl}}"
					],
					"path": [
						"api",
						"produtos"
					]
				},
				"description": "Cria um novo produto em status DRAFT."
			}
		},
		{
			"name": "Atualizar Produto",
			"event": [
				{
					"listen": "test",
					"script": {
						"exec": [
							"pm.test(\"Status code is 200\", function () {",
							"    pm.response.to.have.status(200);",
							"});",
							"",
							"pm.test(\"Product updated successfully\", function () {",
							"    const jsonData = pm.response.json();",
							"    pm.expect(jsonData).to.have.property('success');",
							"    pm.expect(jsonData.success).to.be.true;",
							"    pm.expect(jsonData.data).to.have.property('id');",
							"    pm.expect(jsonData.data.title).to.equal('Produto Teste Postman ATUALIZADO');",
							"    pm.expect(jsonData.data.initialPrice).to.equal(120);",
							"});"
						],
						"type": "text/javascript"
					}
				},
				{
					"listen": "prerequest",
					"script": {
						"exec": [
							"// Verificar se existe produto criado anteriormente",
							"const novoProdutoId = pm.environment.get('novoProdutoId');",
							"if (!novoProdutoId) {",
							"    console.log('ID do novo produto n√£o encontrado. Execute a cria√ß√£o de produto primeiro.');",
							"}",
							"",
							"// Gerar nova data de encerramento (10 dias a partir de agora)",
							"const endDate = new Date();",
							"endDate.setDate(endDate.getDate() + 10);",
							"const endDateTime = endDate.toISOString();",
							"pm.environment.set('newEndDateTime', endDateTime);"
						],
						"type": "text/javascript"
					}
				}
			],
			"request": {
				"method": "PUT",
				"header": [
					{
						"key": "Authorization",
						"value": "Bearer {{authToken}}",
						"type": "text"
					},
					{
						"key": "Content-Type",
						"value": "{{contentType}}",
						"type": "text"
					},
					{
						"key": "Accept",
						"value": "{{acceptType}}",
						"type": "text"
					}
				],
				"body": {
					"mode": "raw",
					"raw": "{\n    \"title\": \"Produto Teste Postman ATUALIZADO\",\n    \"description\": \"Produto de teste ATUALIZADO via Postman. Descri√ß√£o modificada para validar a funcionalidade de atualiza√ß√£o da API.\",\n    \"images\": [\n        \"https://example.com/images/produto-teste-atualizado-1.jpg\",\n        \"https://example.com/images/produto-teste-atualizado-2.jpg\",\n        \"https://example.com/images/produto-teste-atualizado-3.jpg\"\n    ],\n    \"weight\": 0.7,\n    \"dimensions\": \"25x18x12\",\n    \"initialPrice\": 120.00,\n    \"reservePrice\": 100.00,\n    \"incrementMin\": 10.00,\n    \"endDateTime\": \"{{newEndDateTime}}\",\n    \"tags\": [\"teste\", \"postman\", \"api\", \"validacao\", \"atualizado\"]\n}"
				},
				"url": {
					"raw": "{{baseUrl}}/api/produtos/{{novoProdutoId}}",
					"host": [
						"{{baseUrl}}"
					],
					"path": [
						"api",
						"produtos",
						"{{novoProdutoId}}"
					]
				},
				"description": "Atualiza um produto existente em status DRAFT."
			}
		},
		{
			"name": "Publicar Produto",
			"event": [
				{
					"listen": "test",
					"script": {
						"exec": [
							"pm.test(\"Status code is 200\", function () {",
							"    pm.response.to.have.status(200);",
							"});",
							"",
							"pm.test(\"Product published successfully\", function () {",
							"    const jsonData = pm.response.json();",
							"    pm.expect(jsonData).to.have.property('success');",
							"    pm.expect(jsonData.success).to.be.true;",
							"    pm.expect(jsonData.data.status).to.equal('ACTIVE');",
							"    pm.expect(jsonData.data.moderated).to.be.true;",
							"});"
						],
						"type": "text/javascript"
					}
				}
			],
			"request": {
				"method": "PUT",
				"header": [
					{
						"key": "Authorization",
						"value": "Bearer {{authToken}}",
						"type": "text"
					},
					{
						"key": "Accept",
						"value": "{{acceptType}}",
						"type": "text"
					}
				],
				"url": {
					"raw": "{{baseUrl}}/api/produtos/{{novoProdutoId}}/publicar",
					"host": [
						"{{baseUrl}}"
					],
					"path": [
						"api",
						"produtos",
						"{{novoProdutoId}}",
						"publicar"
					]
				},
				"description": "Publica um produto (DRAFT ‚Üí ACTIVE)."
			}
		},
		{
			"name": "Excluir Produto",
			"event": [
				{
					"listen": "test",
					"script": {
						"exec": [
							"pm.test(\"Status code is 200 or 204\", function () {",
							"    pm.expect(pm.response.code).to.be.oneOf([200, 204]);",
							"});",
							"",
							"pm.test(\"Product deleted successfully\", function () {",
							"    if (pm.response.code === 200) {",
							"        const jsonData = pm.response.json();",
							"        pm.expect(jsonData).to.have.property('success');",
							"        pm.expect(jsonData.success).to.be.true;",
							"    }",
							"});",
							"",
							"// Limpar vari√°vel do environment",
							"pm.environment.unset('novoProdutoId');"
						],
						"type": "text/javascript"
					}
				}
			],
			"request": {
				"method": "DELETE",
				"header": [
					{
						"key": "Authorization",
						"value": "Bearer {{authToken}}",
						"type": "text"
					},
					{
						"key": "Accept",
						"value": "{{acceptType}}",
						"type": "text"
					}
				],
				"url": {
					"raw": "{{baseUrl}}/api/produtos/{{novoProdutoId}}",
					"host": [
						"{{baseUrl}}"
					],
					"path": [
						"api",
						"produtos",
						"{{novoProdutoId}}"
					]
				},
				"description": "Exclui um produto do sistema."
			}
		},
		{
			"name": "Criar Produto Eletr√¥nico",
			"event": [
				{
					"listen": "test",
					"script": {
						"exec": [
							"pm.test(\"Status code is 200 or 201\", function () {",
							"    pm.expect(pm.response.code).to.be.oneOf([200, 201]);",
							"});",
							"",
							"pm.test(\"Electronic product created\", function () {",
							"    const jsonData = pm.response.json();",
							"    pm.expect(jsonData.data.categoria).to.equal('Eletr√¥nicos');",
							"    pm.expect(jsonData.data.tags).to.include('smartphone');",
							"    pm.expect(jsonData.data.antiSnipeEnabled).to.be.true;",
							"    ",
							"    pm.environment.set('produtoEletronicoId', jsonData.data.id);",
							"});"
						],
						"type": "text/javascript"
					}
				},
				{
					"listen": "prerequest",
					"script": {
						"exec": [
							"// Gerar data de encerramento (5 dias)",
							"const endDate = new Date();",
							"endDate.setDate(endDate.getDate() + 5);",
							"pm.environment.set('eletronicoEndDate', endDate.toISOString());"
						],
						"type": "text/javascript"
					}
				}
			],
			"request": {
				"method": "POST",
				"header": [
					{
						"key": "Authorization",
						"value": "Bearer {{authToken}}",
						"type": "text"
					},
					{
						"key": "Content-Type",
						"value": "{{contentType}}",
						"type": "text"
					},
					{
						"key": "Accept",
						"value": "{{acceptType}}",
						"type": "text"
					}
				],
				"body": {
					"mode": "raw",
					"raw": "{\n    \"title\": \"Smartphone Teste Postman Pro Max\",\n    \"description\": \"Smartphone de √∫ltima gera√ß√£o criado para testes via Postman. Possui todas as funcionalidades modernas: c√¢mera de alta resolu√ß√£o, processador octa-core, 256GB de armazenamento, 12GB de RAM, tela AMOLED de 6.7 polegadas, bateria de longa dura√ß√£o e carregamento r√°pido.\",\n    \"images\": [\n        \"https://example.com/images/smartphone-teste-1.jpg\",\n        \"https://example.com/images/smartphone-teste-2.jpg\",\n        \"https://example.com/images/smartphone-teste-3.jpg\"\n    ],\n    \"weight\": 0.195,\n    \"dimensions\": \"15.8x7.6x0.8\",\n    \"initialPrice\": 1500.00,\n    \"reservePrice\": 1200.00,\n    \"incrementMin\": 50.00,\n    \"endDateTime\": \"{{eletronicoEndDate}}\",\n    \"categoria\": \"Eletr√¥nicos\",\n    \"tags\": [\"smartphone\", \"android\", \"256gb\", \"12gb\", \"teste\", \"postman\"],\n    \"antiSnipeEnabled\": true,\n    \"antiSnipeExtension\": 600\n}"
				},
				"url": {
					"raw": "{{baseUrl}}/api/produtos",
					"host": [
						"{{baseUrl}}"
					],
					"path": [
						"api",
						"produtos"
					]
				},
				"description": "Cria um produto da categoria Eletr√¥nicos."
			}
		},
		{
			"name": "Criar Produto Artesanal",
			"event": [
				{
					"listen": "test",
					"script": {
						"exec": [
							"pm.test(\"Status code is 200 or 201\", function () {",
							"    pm.expect(pm.response.code).to.be.oneOf([200, 201]);",
							"});",
							"",
							"pm.test(\"Handcraft product created\", function () {",
							"    const jsonData = pm.response.json();",
							"    pm.expect(jsonData.data.categoria).to.equal('Artesanatos');",
							"    pm.expect(jsonData.data.tags).to.include('artesanal');",
							"    pm.expect(jsonData.data.tags).to.include('sustentavel');",
							"    ",
							"    pm.environment.set('produtoArtesanalId', jsonData.data.id);",
							"});"
						],
						"type": "text/javascript"
					}
				},
				{
					"listen": "prerequest",
					"script": {
						"exec": [
							"// Gerar data de encerramento (3 dias)",
							"const endDate = new Date();",
							"endDate.setDate(endDate.getDate() + 3);",
							"pm.environment.set('artesanalEndDate', endDate.toISOString());"
						],
						"type": "text/javascript"
					}
				}
			],
			"request": {
				"method": "POST",
				"header": [
					{
						"key": "Authorization",
						"value": "Bearer {{authToken}}",
						"type": "text"
					},
					{
						"key": "Content-Type",
						"value": "{{contentType}}",
						"type": "text"
					},
					{
						"key": "Accept",
						"value": "{{acceptType}}",
						"type": "text"
					}
				],
				"body": {
					"mode": "raw",
					"raw": "{\n    \"title\": \"Escultura Artesanal Teste Postman\",\n    \"description\": \"Bela escultura artesanal criada para testes via Postman. Pe√ßa √∫nica feita √† m√£o por artes√£o local, utilizando madeira de reflorestamento e t√©cnicas tradicionais. Representa a harmonia entre natureza e arte, com acabamento em verniz natural que real√ßa a beleza da madeira.\",\n    \"images\": [\n        \"https://example.com/images/escultura-teste-1.jpg\",\n        \"https://example.com/images/escultura-teste-2.jpg\"\n    ],\n    \"weight\": 2.5,\n    \"dimensions\": \"30x20x15\",\n    \"initialPrice\": 250.00,\n    \"reservePrice\": 200.00,\n    \"incrementMin\": 15.00,\n    \"endDateTime\": \"{{artesanalEndDate}}\",\n    \"categoria\": \"Artesanatos\",\n    \"tags\": [\"escultura\", \"artesanal\", \"madeira\", \"sustentavel\", \"unico\", \"teste\"],\n    \"antiSnipeEnabled\": true,\n    \"antiSnipeExtension\": 300\n}"
				},
				"url": {
					"raw": "{{baseUrl}}/api/produtos",
					"host": [
						"{{baseUrl}}"
					],
					"path": [
						"api",
						"produtos"
					]
				},
				"description": "Cria um produto da categoria Artesanatos."
			}
		},
		{
			"name": "Buscar Produto Inexistente",
			"event": [
				{
					"listen": "test",
					"script": {
						"exec": [
							"pm.test(\"Status code is 404\", function () {",
							"    pm.response.to.have.status(404);",
							"});",
							"",
							"pm.test(\"Error message is present\", function () {",
							"    const jsonData = pm.response.json();",
							"    pm.expect(jsonData).to.have.property('success');",
							"    pm.expect(jsonData.success).to.be.false;",
							"    pm.expect(jsonData).to.have.property('message');",
							"});"
						],
						"type": "text/javascript"
					}
				}
			],
			"request": {
				"method": "GET",
				"header": [
					{
						"key": "Authorization",
						"value": "Bearer {{authToken}}",
						"type": "text"
					},
					{
						"key": "Accept",
						"value": "{{acceptType}}",
						"type": "text"
					}
				],
				"url": {
					"raw": "{{baseUrl}}/api/produtos/99999999-9999-9999-9999-999999999999",
					"host": [
						"{{baseUrl}}"
					],
					"path": [
						"api",
						"produtos",
						"99999999-9999-9999-9999-999999999999"
					]
				},
				"description": "Testa busca de produto com ID inexistente."
			}
		},
		{
			"name": "Criar Produto com Dados Inv√°lidos",
			"event": [
				{
					"listen": "test",
					"script": {
						"exec": [
							"pm.test(\"Status code is 400\", function () {",
							"    pm.response.to.have.status(400);",
							"});",
							"",
							"pm.test(\"Validation errors are present\", function () {",
							"    const jsonData = pm.response.json();",
							"    pm.expect(jsonData).to.have.property('success');",
							"    pm.expect(jsonData.success).to.be.false;",
							"    pm.expect(jsonData).to.have.property('message');",
							"});"
						],
						"type": "text/javascript"
					}
				}
			],
			"request": {
				"method": "POST",
				"header": [
					{
						"key": "Authorization",
						"value": "Bearer {{authToken}}",
						"type": "text"
					},
					{
						"key": "Content-Type",
						"value": "{{contentType}}",
						"type": "text"
					},
					{
						"key": "Accept",
						"value": "{{acceptType}}",
						"type": "text"
					}
				],
				"body": {
					"mode": "raw",
					"raw": "{\n    \"title\": \"\",\n    \"description\": \"\",\n    \"initialPrice\": -100,\n    \"incrementMin\": 0,\n    \"endDateTime\": \"2020-01-01T00:00:00\"\n}"
				},
				"url": {
					"raw": "{{baseUrl}}/api/produtos",
					"host": [
						"{{baseUrl}}"
					],
					"path": [
						"api",
						"produtos"
					]
				},
				"description": "Testa cria√ß√£o de produto com dados inv√°lidos."
			}
		}
	],
	"auth": {
		"type": "bearer",
		"bearer": [
			{
				"key": "token",
				"value": "{{authToken}}",
				"type": "string"
			}
		]
	},
	"event": [
		{
			"listen": "prerequest",
			"script": {
				"type": "text/javascript",
				"exec": [
					"// Verificar autentica√ß√£o antes de cada requisi√ß√£o",
					"const authToken = pm.environment.get('authToken');",
					"if (!authToken) {",
					"    console.log('‚ö†Ô∏è Token de autentica√ß√£o n√£o encontrado. Execute o login de vendedor primeiro.');",
					"}"
				]
			}
		},
		{
			"listen": "test",
			"script": {
				"type": "text/javascript",
				"exec": [
					"// Log global para debug",
					"console.log('üì¶ Produto - Resposta:', pm.response.code, pm.response.status);"
				]
			}
		}
	]
}