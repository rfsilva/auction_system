{
	"info": {
		"_postman_id": "leilao-produtos-collection",
		"name": "Leilão - Produtos API",
		"description": "Collection para testar os endpoints de produtos do sistema de leilão",
		"schema": "https://schema.getpostman.com/json/collection/v2.1.0/collection.json"
	},
	"item": [
		{
			"name": "Auth",
			"item": [
				{
					"name": "Login Vendedor",
					"event": [
						{
							"listen": "test",
							"script": {
								"exec": [
									"if (pm.response.code === 200) {",
									"    const response = pm.response.json();",
									"    if (response.success && response.data) {",
									"        pm.environment.set('token', response.data.token);",
									"        pm.environment.set('refreshToken', response.data.refreshToken);",
									"        pm.environment.set('userId', response.data.user.id);",
									"        pm.environment.set('sellerId', response.data.user.id);",
									"        console.log('Token salvo:', response.data.token);",
									"    }",
									"}"
								],
								"type": "text/javascript"
							}
						}
					],
					"request": {
						"method": "POST",
						"header": [
							{
								"key": "Content-Type",
								"value": "application/json"
							}
						],
						"body": {
							"mode": "raw",
							"raw": "{\n    \"email\": \"vendedor@teste.com\",\n    \"password\": \"123456\"\n}"
						},
						"url": {
							"raw": "{{apiUrl}}/auth/login",
							"host": [
								"{{apiUrl}}"
							],
							"path": [
								"auth",
								"login"
							]
						},
						"description": "Login para obter token de autenticação"
					}
				},
				{
					"name": "Refresh Token",
					"event": [
						{
							"listen": "test",
							"script": {
								"exec": [
									"if (pm.response.code === 200) {",
									"    const response = pm.response.json();",
									"    if (response.success && response.data) {",
									"        pm.environment.set('token', response.data.token);",
									"        pm.environment.set('refreshToken', response.data.refreshToken);",
									"        console.log('Token renovado:', response.data.token);",
									"    }",
									"}"
								],
								"type": "text/javascript"
							}
						}
					],
					"request": {
						"method": "POST",
						"header": [
							{
								"key": "Content-Type",
								"value": "application/json"
							}
						],
						"body": {
							"mode": "raw",
							"raw": "{\n    \"refreshToken\": \"{{refreshToken}}\"\n}"
						},
						"url": {
							"raw": "{{apiUrl}}/auth/refresh",
							"host": [
								"{{apiUrl}}"
							],
							"path": [
								"auth",
								"refresh"
							]
						}
					}
				}
			]
		},
		{
			"name": "Produtos - CRUD Vendedor",
			"item": [
				{
					"name": "Criar Produto",
					"event": [
						{
							"listen": "test",
							"script": {
								"exec": [
									"if (pm.response.code === 201) {",
									"    const response = pm.response.json();",
									"    if (response.success && response.data) {",
									"        pm.environment.set('produtoId', response.data.id);",
									"        console.log('Produto criado com ID:', response.data.id);",
									"    }",
									"}"
								],
								"type": "text/javascript"
							}
						}
					],
					"request": {
						"method": "POST",
						"header": [
							{
								"key": "Content-Type",
								"value": "application/json"
							},
							{
								"key": "Authorization",
								"value": "Bearer {{token}}"
							}
						],
						"body": {
							"mode": "raw",
							"raw": "{\n    \"title\": \"iPhone 15 Pro Max 256GB\",\n    \"description\": \"iPhone 15 Pro Max em excelente estado, cor Titânio Natural, 256GB de armazenamento. Acompanha caixa original, carregador e fones. Sem riscos ou defeitos.\",\n    \"images\": [\n        \"https://example.com/iphone1.jpg\",\n        \"https://example.com/iphone2.jpg\"\n    ],\n    \"weight\": 0.221,\n    \"dimensions\": \"{\\\"length\\\": 15.9, \\\"width\\\": 7.69, \\\"height\\\": 0.83}\",\n    \"initialPrice\": 3500.00,\n    \"reservePrice\": 4000.00,\n    \"incrementMin\": 50.00,\n    \"endDateTime\": \"2024-12-31T23:59:59\",\n    \"categoria\": \"Eletrônicos\",\n    \"tags\": [\"smartphone\", \"apple\", \"iphone\", \"celular\"],\n    \"antiSnipeEnabled\": true,\n    \"antiSnipeExtension\": 300\n}"
						},
						"url": {
							"raw": "{{apiUrl}}/produtos",
							"host": [
								"{{apiUrl}}"
							],
							"path": [
								"produtos"
							]
						},
						"description": "Cria um novo produto"
					}
				},
				{
					"name": "Listar Meus Produtos",
					"request": {
						"method": "GET",
						"header": [
							{
								"key": "Authorization",
								"value": "Bearer {{token}}"
							}
						],
						"url": {
							"raw": "{{apiUrl}}/produtos/meus-produtos?page=0&size=10",
							"host": [
								"{{apiUrl}}"
							],
							"path": [
								"produtos",
								"meus-produtos"
							],
							"query": [
								{
									"key": "page",
									"value": "0"
								},
								{
									"key": "size",
									"value": "10"
								}
							]
						},
						"description": "Lista produtos do vendedor logado"
					}
				},
				{
					"name": "Buscar Produto por ID",
					"request": {
						"method": "GET",
						"header": [
							{
								"key": "Authorization",
								"value": "Bearer {{token}}"
							}
						],
						"url": {
							"raw": "{{apiUrl}}/produtos/{{produtoId}}",
							"host": [
								"{{apiUrl}}"
							],
							"path": [
								"produtos",
								"{{produtoId}}"
							]
						},
						"description": "Busca produto específico por ID"
					}
				},
				{
					"name": "Atualizar Produto",
					"request": {
						"method": "PUT",
						"header": [
							{
								"key": "Content-Type",
								"value": "application/json"
							},
							{
								"key": "Authorization",
								"value": "Bearer {{token}}"
							}
						],
						"body": {
							"mode": "raw",
							"raw": "{\n    \"title\": \"iPhone 15 Pro Max 256GB - ATUALIZADO\",\n    \"description\": \"iPhone 15 Pro Max em excelente estado, cor Titânio Natural, 256GB de armazenamento. Acompanha caixa original, carregador e fones. Sem riscos ou defeitos. PRODUTO ATUALIZADO!\",\n    \"initialPrice\": 3200.00,\n    \"reservePrice\": 3800.00,\n    \"incrementMin\": 25.00,\n    \"categoria\": \"Smartphones\",\n    \"tags\": [\"smartphone\", \"apple\", \"iphone\", \"celular\", \"premium\"]\n}"
						},
						"url": {
							"raw": "{{apiUrl}}/produtos/{{produtoId}}",
							"host": [
								"{{apiUrl}}"
							],
							"path": [
								"produtos",
								"{{produtoId}}"
							]
						},
						"description": "Atualiza produto existente"
					}
				},
				{
					"name": "Publicar Produto",
					"request": {
						"method": "POST",
						"header": [
							{
								"key": "Authorization",
								"value": "Bearer {{token}}"
							}
						],
						"body": {
							"mode": "raw",
							"raw": ""
						},
						"url": {
							"raw": "{{apiUrl}}/produtos/{{produtoId}}/publicar",
							"host": [
								"{{apiUrl}}"
							],
							"path": [
								"produtos",
								"{{produtoId}}",
								"publicar"
							]
						},
						"description": "Publica produto (muda status para ACTIVE)"
					}
				},
				{
					"name": "Excluir Produto",
					"request": {
						"method": "DELETE",
						"header": [
							{
								"key": "Authorization",
								"value": "Bearer {{token}}"
							}
						],
						"url": {
							"raw": "{{apiUrl}}/produtos/{{produtoId}}",
							"host": [
								"{{apiUrl}}"
							],
							"path": [
								"produtos",
								"{{produtoId}}"
							]
						},
						"description": "Exclui produto"
					}
				},
				{
					"name": "Listar Categorias",
					"request": {
						"method": "GET",
						"header": [
							{
								"key": "Authorization",
								"value": "Bearer {{token}}"
							}
						],
						"url": {
							"raw": "{{apiUrl}}/produtos/categorias",
							"host": [
								"{{apiUrl}}"
							],
							"path": [
								"produtos",
								"categorias"
							]
						},
						"description": "Lista categorias disponíveis"
					}
				}
			]
		},
		{
			"name": "Catálogo Público",
			"item": [
				{
					"name": "Buscar Produtos no Catálogo",
					"request": {
						"method": "GET",
						"header": [],
						"url": {
							"raw": "{{apiUrl}}/catalogo/produtos?page=0&size=20&ordenacao=recentes",
							"host": [
								"{{apiUrl}}"
							],
							"path": [
								"catalogo",
								"produtos"
							],
							"query": [
								{
									"key": "page",
									"value": "0"
								},
								{
									"key": "size",
									"value": "20"
								},
								{
									"key": "categoria",
									"value": "Eletrônicos",
									"disabled": true
								},
								{
									"key": "precoMin",
									"value": "1000",
									"disabled": true
								},
								{
									"key": "precoMax",
									"value": "5000",
									"disabled": true
								},
								{
									"key": "titulo",
									"value": "iPhone",
									"disabled": true
								},
								{
									"key": "ordenacao",
									"value": "recentes"
								}
							]
						},
						"description": "Busca produtos no catálogo público (sem autenticação)"
					}
				},
				{
					"name": "Buscar Produtos - Filtro por Categoria",
					"request": {
						"method": "GET",
						"header": [],
						"url": {
							"raw": "{{apiUrl}}/catalogo/produtos?categoria=Eletrônicos&ordenacao=preco_asc",
							"host": [
								"{{apiUrl}}"
							],
							"path": [
								"catalogo",
								"produtos"
							],
							"query": [
								{
									"key": "categoria",
									"value": "Eletrônicos"
								},
								{
									"key": "ordenacao",
									"value": "preco_asc"
								}
							]
						},
						"description": "Busca produtos por categoria"
					}
				},
				{
					"name": "Buscar Produtos - Filtro por Preço",
					"request": {
						"method": "GET",
						"header": [],
						"url": {
							"raw": "{{apiUrl}}/catalogo/produtos?precoMin=1000&precoMax=5000&ordenacao=preco_desc",
							"host": [
								"{{apiUrl}}"
							],
							"path": [
								"catalogo",
								"produtos"
							],
							"query": [
								{
									"key": "precoMin",
									"value": "1000"
								},
								{
									"key": "precoMax",
									"value": "5000"
								},
								{
									"key": "ordenacao",
									"value": "preco_desc"
								}
							]
						},
						"description": "Busca produtos por faixa de preço"
					}
				},
				{
					"name": "Buscar Produtos - Filtro por Título",
					"request": {
						"method": "GET",
						"header": [],
						"url": {
							"raw": "{{apiUrl}}/catalogo/produtos?titulo=iPhone&ordenacao=terminando",
							"host": [
								"{{apiUrl}}"
							],
							"path": [
								"catalogo",
								"produtos"
							],
							"query": [
								{
									"key": "titulo",
									"value": "iPhone"
								},
								{
									"key": "ordenacao",
									"value": "terminando"
								}
							]
						},
						"description": "Busca produtos por título"
					}
				},
				{
					"name": "Buscar Produto Específico (Público)",
					"request": {
						"method": "GET",
						"header": [],
						"url": {
							"raw": "{{apiUrl}}/catalogo/produtos/{{produtoId}}",
							"host": [
								"{{apiUrl}}"
							],
							"path": [
								"catalogo",
								"produtos",
								"{{produtoId}}"
							]
						},
						"description": "Busca produto específico no catálogo público"
					}
				},
				{
					"name": "Listar Categorias (Público)",
					"request": {
						"method": "GET",
						"header": [],
						"url": {
							"raw": "{{apiUrl}}/catalogo/categorias",
							"host": [
								"{{apiUrl}}"
							],
							"path": [
								"catalogo",
								"categorias"
							]
						},
						"description": "Lista categorias disponíveis (público)"
					}
				}
			]
		},
		{
			"name": "Cenários de Teste",
			"item": [
				{
					"name": "Criar Múltiplos Produtos",
					"item": [
						{
							"name": "Produto 1 - Notebook",
							"event": [
								{
									"listen": "test",
									"script": {
										"exec": [
											"if (pm.response.code === 201) {",
											"    const response = pm.response.json();",
											"    console.log('Produto Notebook criado:', response.data.id);",
											"}"
										],
										"type": "text/javascript"
									}
								}
							],
							"request": {
								"method": "POST",
								"header": [
									{
										"key": "Content-Type",
										"value": "application/json"
									},
									{
										"key": "Authorization",
										"value": "Bearer {{token}}"
									}
								],
								"body": {
									"mode": "raw",
									"raw": "{\n    \"title\": \"MacBook Pro 16 M3 Max\",\n    \"description\": \"MacBook Pro 16 polegadas com chip M3 Max, 32GB RAM, 1TB SSD. Ideal para profissionais criativos e desenvolvedores.\",\n    \"images\": [\n        \"https://example.com/macbook1.jpg\",\n        \"https://example.com/macbook2.jpg\"\n    ],\n    \"weight\": 2.15,\n    \"dimensions\": \"{\\\"length\\\": 35.57, \\\"width\\\": 24.81, \\\"height\\\": 1.68}\",\n    \"initialPrice\": 15000.00,\n    \"reservePrice\": 18000.00,\n    \"incrementMin\": 200.00,\n    \"endDateTime\": \"2024-12-25T20:00:00\",\n    \"categoria\": \"Computadores\",\n    \"tags\": [\"notebook\", \"apple\", \"macbook\", \"profissional\"],\n    \"antiSnipeEnabled\": true,\n    \"antiSnipeExtension\": 600\n}"
								},
								"url": {
									"raw": "{{apiUrl}}/produtos",
									"host": [
										"{{apiUrl}}"
									],
									"path": [
										"produtos"
									]
								}
							}
						},
						{
							"name": "Produto 2 - Relógio",
							"event": [
								{
									"listen": "test",
									"script": {
										"exec": [
											"if (pm.response.code === 201) {",
											"    const response = pm.response.json();",
											"    console.log('Produto Relógio criado:', response.data.id);",
											"}"
										],
										"type": "text/javascript"
									}
								}
							],
							"request": {
								"method": "POST",
								"header": [
									{
										"key": "Content-Type",
										"value": "application/json"
									},
									{
										"key": "Authorization",
										"value": "Bearer {{token}}"
									}
								],
								"body": {
									"mode": "raw",
									"raw": "{\n    \"title\": \"Rolex Submariner Date\",\n    \"description\": \"Rolex Submariner Date em aço inoxidável, mostrador preto, bezel unidirecional. Relógio icônico em excelente estado de conservação.\",\n    \"images\": [\n        \"https://example.com/rolex1.jpg\",\n        \"https://example.com/rolex2.jpg\",\n        \"https://example.com/rolex3.jpg\"\n    ],\n    \"weight\": 0.155,\n    \"dimensions\": \"{\\\"diameter\\\": 41, \\\"thickness\\\": 12.5}\",\n    \"initialPrice\": 45000.00,\n    \"reservePrice\": 55000.00,\n    \"incrementMin\": 500.00,\n    \"endDateTime\": \"2024-12-30T18:00:00\",\n    \"categoria\": \"Relógios\",\n    \"tags\": [\"rolex\", \"submariner\", \"luxo\", \"colecionável\"],\n    \"antiSnipeEnabled\": true,\n    \"antiSnipeExtension\": 900\n}"
								},
								"url": {
									"raw": "{{apiUrl}}/produtos",
									"host": [
										"{{apiUrl}}"
									],
									"path": [
										"produtos"
									]
								}
							}
						},
						{
							"name": "Produto 3 - Câmera",
							"event": [
								{
									"listen": "test",
									"script": {
										"exec": [
											"if (pm.response.code === 201) {",
											"    const response = pm.response.json();",
											"    console.log('Produto Câmera criado:', response.data.id);",
											"}"
										],
										"type": "text/javascript"
									}
								}
							],
							"request": {
								"method": "POST",
								"header": [
									{
										"key": "Content-Type",
										"value": "application/json"
									},
									{
										"key": "Authorization",
										"value": "Bearer {{token}}"
									}
								],
								"body": {
									"mode": "raw",
									"raw": "{\n    \"title\": \"Canon EOS R5 + Lente 24-70mm\",\n    \"description\": \"Câmera mirrorless Canon EOS R5 com lente RF 24-70mm f/2.8L IS USM. Kit completo para fotografia profissional, pouquíssimo uso.\",\n    \"images\": [\n        \"https://example.com/canon1.jpg\",\n        \"https://example.com/canon2.jpg\"\n    ],\n    \"weight\": 1.8,\n    \"dimensions\": \"{\\\"length\\\": 13.8, \\\"width\\\": 9.76, \\\"height\\\": 8.85}\",\n    \"initialPrice\": 8500.00,\n    \"reservePrice\": 10000.00,\n    \"incrementMin\": 100.00,\n    \"endDateTime\": \"2024-12-28T16:30:00\",\n    \"categoria\": \"Fotografia\",\n    \"tags\": [\"camera\", \"canon\", \"mirrorless\", \"profissional\"],\n    \"antiSnipeEnabled\": true,\n    \"antiSnipeExtension\": 300\n}"
								},
								"url": {
									"raw": "{{apiUrl}}/produtos",
									"host": [
										"{{apiUrl}}"
									],
									"path": [
										"produtos"
									]
								}
							}
						}
					]
				},
				{
					"name": "Teste de Validações",
					"item": [
						{
							"name": "Criar Produto - Data Inválida",
							"request": {
								"method": "POST",
								"header": [
									{
										"key": "Content-Type",
										"value": "application/json"
									},
									{
										"key": "Authorization",
										"value": "Bearer {{token}}"
									}
								],
								"body": {
									"mode": "raw",
									"raw": "{\n    \"title\": \"Produto com Data Inválida\",\n    \"description\": \"Este produto tem data de encerramento no passado\",\n    \"initialPrice\": 100.00,\n    \"endDateTime\": \"2023-01-01T10:00:00\"\n}"
								},
								"url": {
									"raw": "{{apiUrl}}/produtos",
									"host": [
										"{{apiUrl}}"
									],
									"path": [
										"produtos"
									]
								},
								"description": "Deve retornar erro - data no passado"
							}
						},
						{
							"name": "Criar Produto - Preço Inválido",
							"request": {
								"method": "POST",
								"header": [
									{
										"key": "Content-Type",
										"value": "application/json"
									},
									{
										"key": "Authorization",
										"value": "Bearer {{token}}"
									}
								],
								"body": {
									"mode": "raw",
									"raw": "{\n    \"title\": \"Produto com Preço Inválido\",\n    \"description\": \"Este produto tem preço de reserva menor que inicial\",\n    \"initialPrice\": 1000.00,\n    \"reservePrice\": 500.00,\n    \"endDateTime\": \"2024-12-31T23:59:59\"\n}"
								},
								"url": {
									"raw": "{{apiUrl}}/produtos",
									"host": [
										"{{apiUrl}}"
									],
									"path": [
										"produtos"
									]
								},
								"description": "Deve retornar erro - preço de reserva menor que inicial"
							}
						},
						{
							"name": "Atualizar Produto Inexistente",
							"request": {
								"method": "PUT",
								"header": [
									{
										"key": "Content-Type",
										"value": "application/json"
									},
									{
										"key": "Authorization",
										"value": "Bearer {{token}}"
									}
								],
								"body": {
									"mode": "raw",
									"raw": "{\n    \"title\": \"Produto Inexistente\"\n}"
								},
								"url": {
									"raw": "{{apiUrl}}/produtos/00000000-0000-0000-0000-000000000000",
									"host": [
										"{{apiUrl}}"
									],
									"path": [
										"produtos",
										"00000000-0000-0000-0000-000000000000"
									]
								},
								"description": "Deve retornar 404 - produto não encontrado"
							}
						}
					]
				}
			]
		}
	],
	"event": [
		{
			"listen": "prerequest",
			"script": {
				"type": "text/javascript",
				"exec": [
					""
				]
			}
		},
		{
			"listen": "test",
			"script": {
				"type": "text/javascript",
				"exec": [
					""
				]
			}
		}
	]
}