{
	"info": {
		"_postman_id": "lotes-collection-id",
		"name": "04 - Lotes",
		"description": "Collection para testes de gest√£o de lotes do sistema de leil√£o.\n\n**Funcionalidades cobertas:**\n- Listar lotes do vendedor\n- Listar lotes p√∫blicos (cat√°logo)\n- Buscar lote por ID\n- Criar novo lote\n- Atualizar lote existente\n- Ativar lote (DRAFT ‚Üí ACTIVE)\n- Cancelar lote\n- Excluir lote\n- Associar produtos ao lote\n\n**Dados de teste dispon√≠veis:**\n- Lotes em diferentes status: DRAFT, ACTIVE, CLOSED\n- Lotes com produtos associados\n- Diferentes prazos de encerramento\n\n**Permiss√µes necess√°rias:** SELLER para opera√ß√µes de CRUD, p√∫blico para cat√°logo",
		"schema": "https://schema.getpostman.com/json/collection/v2.1.0/collection.json"
	},
	"item": [
		{
			"name": "Listar Meus Lotes",
			"event": [
				{
					"listen": "test",
					"script": {
						"exec": [
							"pm.test(\"Status code is 200\", function () {",
							"    pm.response.to.have.status(200);",
							"});",
							"",
							"pm.test(\"Response has paginated structure\", function () {",
							"    const jsonData = pm.response.json();",
							"    pm.expect(jsonData).to.have.property('success');",
							"    pm.expect(jsonData.success).to.be.true;",
							"    pm.expect(jsonData.data).to.have.property('content');",
							"    pm.expect(jsonData.data).to.have.property('totalElements');",
							"    pm.expect(jsonData.data).to.have.property('totalPages');",
							"});",
							"",
							"pm.test(\"Lotes have required fields\", function () {",
							"    const jsonData = pm.response.json();",
							"    if (jsonData.data.content.length > 0) {",
							"        const lote = jsonData.data.content[0];",
							"        pm.expect(lote).to.have.property('id');",
							"        pm.expect(lote).to.have.property('title');",
							"        pm.expect(lote).to.have.property('description');",
							"        pm.expect(lote).to.have.property('loteEndDateTime');",
							"        pm.expect(lote).to.have.property('status');",
							"        pm.expect(lote).to.have.property('produtoIds');",
							"        pm.expect(lote).to.have.property('totalProdutos');",
							"    }",
							"});"
						],
						"type": "text/javascript"
					}
				}
			],
			"request": {
				"method": "GET",
				"header": [
					{
						"key": "Authorization",
						"value": "Bearer {{authToken}}",
						"type": "text"
					},
					{
						"key": "Accept",
						"value": "{{acceptType}}",
						"type": "text"
					}
				],
				"url": {
					"raw": "{{baseUrl}}/api/lotes/meus?page=0&size=20",
					"host": [
						"{{baseUrl}}"
					],
					"path": [
						"api",
						"lotes",
						"meus"
					],
					"query": [
						{
							"key": "page",
							"value": "0"
						},
						{
							"key": "size",
							"value": "20"
						}
					]
				},
				"description": "Lista todos os lotes do vendedor logado."
			}
		},
		{
			"name": "Listar Lotes P√∫blicos",
			"event": [
				{
					"listen": "test",
					"script": {
						"exec": [
							"pm.test(\"Status code is 200\", function () {",
							"    pm.response.to.have.status(200);",
							"});",
							"",
							"pm.test(\"Response has paginated structure\", function () {",
							"    const jsonData = pm.response.json();",
							"    pm.expect(jsonData).to.have.property('success');",
							"    pm.expect(jsonData.success).to.be.true;",
							"    pm.expect(jsonData.data).to.have.property('content');",
							"    pm.expect(jsonData.data).to.have.property('totalElements');",
							"});",
							"",
							"pm.test(\"Public lotes are visible\", function () {",
							"    const jsonData = pm.response.json();",
							"    if (jsonData.data.content.length > 0) {",
							"        jsonData.data.content.forEach(lote => {",
							"            pm.expect(['ACTIVE', 'CLOSED']).to.include(lote.status);",
							"        });",
							"    }",
							"});"
						],
						"type": "text/javascript"
					}
				}
			],
			"request": {
				"method": "GET",
				"header": [
					{
						"key": "Accept",
						"value": "{{acceptType}}",
						"type": "text"
					}
				],
				"url": {
					"raw": "{{baseUrl}}/api/lotes/publicos?page=0&size=20",
					"host": [
						"{{baseUrl}}"
					],
					"path": [
						"api",
						"lotes",
						"publicos"
					],
					"query": [
						{
							"key": "page",
							"value": "0"
						},
						{
							"key": "size",
							"value": "20"
						}
					]
				},
				"description": "Lista lotes p√∫blicos vis√≠veis para visitantes."
			}
		},
		{
			"name": "Buscar Lote P√∫blico por ID",
			"event": [
				{
					"listen": "test",
					"script": {
						"exec": [
							"pm.test(\"Status code is 200\", function () {",
							"    pm.response.to.have.status(200);",
							"});",
							"",
							"pm.test(\"Lote details are present\", function () {",
							"    const jsonData = pm.response.json();",
							"    pm.expect(jsonData).to.have.property('success');",
							"    pm.expect(jsonData.success).to.be.true;",
							"    pm.expect(jsonData.data).to.have.property('id');",
							"    pm.expect(jsonData.data).to.have.property('title');",
							"    pm.expect(jsonData.data).to.have.property('description');",
							"    pm.expect(jsonData.data).to.have.property('loteEndDateTime');",
							"    pm.expect(jsonData.data).to.have.property('status');",
							"});"
						],
						"type": "text/javascript"
					}
				},
				{
					"listen": "prerequest",
					"script": {
						"exec": [
							"// Usar um ID de lote conhecido ou buscar da lista p√∫blica",
							"// Por enquanto, vamos usar uma vari√°vel que pode ser definida manualmente",
							"const loteId = pm.environment.get('loteId') || 'lote-id-placeholder';",
							"pm.environment.set('loteIdParaBusca', loteId);"
						],
						"type": "text/javascript"
					}
				}
			],
			"request": {
				"method": "GET",
				"header": [
					{
						"key": "Accept",
						"value": "{{acceptType}}",
						"type": "text"
					}
				],
				"url": {
					"raw": "{{baseUrl}}/api/catalogo/lotes/{{loteIdParaBusca}}",
					"host": [
						"{{baseUrl}}"
					],
					"path": [
						"api",
						"catalogo",
						"lotes",
						"{{loteIdParaBusca}}"
					]
				},
				"description": "Busca um lote espec√≠fico no cat√°logo p√∫blico."
			}
		},
		{
			"name": "Buscar Lote por ID (Vendedor)",
			"event": [
				{
					"listen": "test",
					"script": {
						"exec": [
							"pm.test(\"Status code is 200\", function () {",
							"    pm.response.to.have.status(200);",
							"});",
							"",
							"pm.test(\"Lote details are present\", function () {",
							"    const jsonData = pm.response.json();",
							"    pm.expect(jsonData).to.have.property('success');",
							"    pm.expect(jsonData.success).to.be.true;",
							"    pm.expect(jsonData.data).to.have.property('id');",
							"    pm.expect(jsonData.data).to.have.property('sellerId');",
							"    pm.expect(jsonData.data).to.have.property('title');",
							"    pm.expect(jsonData.data).to.have.property('description');",
							"});"
						],
						"type": "text/javascript"
					}
				}
			],
			"request": {
				"method": "GET",
				"header": [
					{
						"key": "Authorization",
						"value": "Bearer {{authToken}}",
						"type": "text"
					},
					{
						"key": "Accept",
						"value": "{{acceptType}}",
						"type": "text"
					}
				],
				"url": {
					"raw": "{{baseUrl}}/api/lotes/{{loteId}}",
					"host": [
						"{{baseUrl}}"
					],
					"path": [
						"api",
						"lotes",
						"{{loteId}}"
					]
				},
				"description": "Busca um lote espec√≠fico (√°rea do vendedor)."
			}
		},
		{
			"name": "Criar Novo Lote",
			"event": [
				{
					"listen": "test",
					"script": {
						"exec": [
							"pm.test(\"Status code is 200 or 201\", function () {",
							"    pm.expect(pm.response.code).to.be.oneOf([200, 201]);",
							"});",
							"",
							"pm.test(\"Lote created successfully\", function () {",
							"    const jsonData = pm.response.json();",
							"    pm.expect(jsonData).to.have.property('success');",
							"    pm.expect(jsonData.success).to.be.true;",
							"    pm.expect(jsonData.data).to.have.property('id');",
							"    pm.expect(jsonData.data.title).to.equal('Lote Teste Postman');",
							"    pm.expect(jsonData.data.status).to.equal('DRAFT');",
							"    ",
							"    // Salvar ID do lote criado",
							"    pm.environment.set('novoLoteId', jsonData.data.id);",
							"});"
						],
						"type": "text/javascript"
					}
				},
				{
					"listen": "prerequest",
					"script": {
						"exec": [
							"// Verificar se est√° logado como vendedor",
							"const authToken = pm.environment.get('authToken');",
							"if (!authToken) {",
							"    console.log('Token de autentica√ß√£o n√£o encontrado. Execute o login de vendedor primeiro.');",
							"}",
							"",
							"// Gerar data de encerramento (5 dias a partir de agora)",
							"const endDate = new Date();",
							"endDate.setDate(endDate.getDate() + 5);",
							"const loteEndDateTime = endDate.toISOString();",
							"pm.environment.set('loteEndDateTime', loteEndDateTime);"
						],
						"type": "text/javascript"
					}
				}
			],
			"request": {
				"method": "POST",
				"header": [
					{
						"key": "Authorization",
						"value": "Bearer {{authToken}}",
						"type": "text"
					},
					{
						"key": "Content-Type",
						"value": "{{contentType}}",
						"type": "text"
					},
					{
						"key": "Accept",
						"value": "{{acceptType}}",
						"type": "text"
					}
				],
				"body": {
					"mode": "raw",
					"raw": "{\n    \"title\": \"Lote Teste Postman\",\n    \"description\": \"Lote de teste criado via Postman para valida√ß√£o da API. Este lote ser√° usado para testar todas as funcionalidades relacionadas √† gest√£o de lotes no sistema de leil√£o eletr√¥nico.\",\n    \"loteEndDateTime\": \"{{loteEndDateTime}}\",\n    \"produtoIds\": []\n}"
				},
				"url": {
					"raw": "{{baseUrl}}/api/lotes",
					"host": [
						"{{baseUrl}}"
					],
					"path": [
						"api",
						"lotes"
					]
				},
				"description": "Cria um novo lote em status DRAFT."
			}
		},
		{
			"name": "Atualizar Lote",
			"event": [
				{
					"listen": "test",
					"script": {
						"exec": [
							"pm.test(\"Status code is 200\", function () {",
							"    pm.response.to.have.status(200);",
							"});",
							"",
							"pm.test(\"Lote updated successfully\", function () {",
							"    const jsonData = pm.response.json();",
							"    pm.expect(jsonData).to.have.property('success');",
							"    pm.expect(jsonData.success).to.be.true;",
							"    pm.expect(jsonData.data).to.have.property('id');",
							"    pm.expect(jsonData.data.title).to.equal('Lote Teste Postman ATUALIZADO');",
							"});"
						],
						"type": "text/javascript"
					}
				},
				{
					"listen": "prerequest",
					"script": {
						"exec": [
							"// Verificar se existe lote criado anteriormente",
							"const novoLoteId = pm.environment.get('novoLoteId');",
							"if (!novoLoteId) {",
							"    console.log('ID do novo lote n√£o encontrado. Execute a cria√ß√£o de lote primeiro.');",
							"}",
							"",
							"// Gerar nova data de encerramento (7 dias a partir de agora)",
							"const endDate = new Date();",
							"endDate.setDate(endDate.getDate() + 7);",
							"const newLoteEndDateTime = endDate.toISOString();",
							"pm.environment.set('newLoteEndDateTime', newLoteEndDateTime);"
						],
						"type": "text/javascript"
					}
				}
			],
			"request": {
				"method": "PUT",
				"header": [
					{
						"key": "Authorization",
						"value": "Bearer {{authToken}}",
						"type": "text"
					},
					{
						"key": "Content-Type",
						"value": "{{contentType}}",
						"type": "text"
					},
					{
						"key": "Accept",
						"value": "{{acceptType}}",
						"type": "text"
					}
				],
				"body": {
					"mode": "raw",
					"raw": "{\n    \"title\": \"Lote Teste Postman ATUALIZADO\",\n    \"description\": \"Lote de teste ATUALIZADO via Postman. Descri√ß√£o modificada para validar a funcionalidade de atualiza√ß√£o da API. Agora com prazo estendido e informa√ß√µes adicionais sobre os produtos que ser√£o inclu√≠dos.\",\n    \"loteEndDateTime\": \"{{newLoteEndDateTime}}\"\n}"
				},
				"url": {
					"raw": "{{baseUrl}}/api/lotes/{{novoLoteId}}",
					"host": [
						"{{baseUrl}}"
					],
					"path": [
						"api",
						"lotes",
						"{{novoLoteId}}"
					]
				},
				"description": "Atualiza um lote existente em status DRAFT."
			}
		},
		{
			"name": "Associar Produtos ao Lote",
			"event": [
				{
					"listen": "test",
					"script": {
						"exec": [
							"pm.test(\"Status code is 200\", function () {",
							"    pm.response.to.have.status(200);",
							"});",
							"",
							"pm.test(\"Products associated successfully\", function () {",
							"    const jsonData = pm.response.json();",
							"    pm.expect(jsonData).to.have.property('success');",
							"    pm.expect(jsonData.success).to.be.true;",
							"    pm.expect(jsonData.data.produtoIds).to.be.an('array');",
							"    pm.expect(jsonData.data.totalProdutos).to.be.greaterThan(0);",
							"});"
						],
						"type": "text/javascript"
					}
				},
				{
					"listen": "prerequest",
					"script": {
						"exec": [
							"// Verificar se existem produtos criados anteriormente",
							"const produtoEletronicoId = pm.environment.get('produtoEletronicoId');",
							"const produtoArtesanalId = pm.environment.get('produtoArtesanalId');",
							"",
							"let produtoIds = [];",
							"if (produtoEletronicoId) produtoIds.push(produtoEletronicoId);",
							"if (produtoArtesanalId) produtoIds.push(produtoArtesanalId);",
							"",
							"pm.environment.set('produtoIdsParaLote', JSON.stringify(produtoIds));",
							"",
							"if (produtoIds.length === 0) {",
							"    console.log('Nenhum produto encontrado. Execute a cria√ß√£o de produtos primeiro.');",
							"}"
						],
						"type": "text/javascript"
					}
				}
			],
			"request": {
				"method": "PUT",
				"header": [
					{
						"key": "Authorization",
						"value": "Bearer {{authToken}}",
						"type": "text"
					},
					{
						"key": "Content-Type",
						"value": "{{contentType}}",
						"type": "text"
					},
					{
						"key": "Accept",
						"value": "{{acceptType}}",
						"type": "text"
					}
				],
				"body": {
					"mode": "raw",
					"raw": "{\n    \"title\": \"Lote Teste Postman com Produtos\",\n    \"description\": \"Lote de teste com produtos associados via Postman. Este lote cont√©m produtos de diferentes categorias para demonstrar a funcionalidade de agrupamento.\",\n    \"loteEndDateTime\": \"{{newLoteEndDateTime}}\",\n    \"produtoIds\": {{produtoIdsParaLote}}\n}"
				},
				"url": {
					"raw": "{{baseUrl}}/api/lotes/{{novoLoteId}}",
					"host": [
						"{{baseUrl}}"
					],
					"path": [
						"api",
						"lotes",
						"{{novoLoteId}}"
					]
				},
				"description": "Associa produtos existentes ao lote."
			}
		},
		{
			"name": "Ativar Lote",
			"event": [
				{
					"listen": "test",
					"script": {
						"exec": [
							"pm.test(\"Status code is 200\", function () {",
							"    pm.response.to.have.status(200);",
							"});",
							"",
							"pm.test(\"Lote activated successfully\", function () {",
							"    const jsonData = pm.response.json();",
							"    pm.expect(jsonData).to.have.property('success');",
							"    pm.expect(jsonData.success).to.be.true;",
							"    pm.expect(jsonData.data.status).to.equal('ACTIVE');",
							"    pm.expect(jsonData.data.isActive).to.be.true;",
							"});"
						],
						"type": "text/javascript"
					}
				}
			],
			"request": {
				"method": "PUT",
				"header": [
					{
						"key": "Authorization",
						"value": "Bearer {{authToken}}",
						"type": "text"
					},
					{
						"key": "Accept",
						"value": "{{acceptType}}",
						"type": "text"
					}
				],
				"url": {
					"raw": "{{baseUrl}}/api/lotes/{{novoLoteId}}/ativar",
					"host": [
						"{{baseUrl}}"
					],
					"path": [
						"api",
						"lotes",
						"{{novoLoteId}}",
						"ativar"
					]
				},
				"description": "Ativa um lote (DRAFT ‚Üí ACTIVE)."
			}
		},
		{
			"name": "Cancelar Lote",
			"event": [
				{
					"listen": "test",
					"script": {
						"exec": [
							"pm.test(\"Status code is 200\", function () {",
							"    pm.response.to.have.status(200);",
							"});",
							"",
							"pm.test(\"Lote cancelled successfully\", function () {",
							"    const jsonData = pm.response.json();",
							"    pm.expect(jsonData).to.have.property('success');",
							"    pm.expect(jsonData.success).to.be.true;",
							"    pm.expect(jsonData.data.status).to.equal('CANCELLED');",
							"    pm.expect(jsonData.data.isActive).to.be.false;",
							"});"
						],
						"type": "text/javascript"
					}
				}
			],
			"request": {
				"method": "PUT",
				"header": [
					{
						"key": "Authorization",
						"value": "Bearer {{authToken}}",
						"type": "text"
					},
					{
						"key": "Accept",
						"value": "{{acceptType}}",
						"type": "text"
					}
				],
				"url": {
					"raw": "{{baseUrl}}/api/lotes/{{novoLoteId}}/cancelar",
					"host": [
						"{{baseUrl}}"
					],
					"path": [
						"api",
						"lotes",
						"{{novoLoteId}}",
						"cancelar"
					]
				},
				"description": "Cancela um lote ativo."
			}
		},
		{
			"name": "Excluir Lote",
			"event": [
				{
					"listen": "test",
					"script": {
						"exec": [
							"pm.test(\"Status code is 200 or 204\", function () {",
							"    pm.expect(pm.response.code).to.be.oneOf([200, 204]);",
							"});",
							"",
							"pm.test(\"Lote deleted successfully\", function () {",
							"    if (pm.response.code === 200) {",
							"        const jsonData = pm.response.json();",
							"        pm.expect(jsonData).to.have.property('success');",
							"        pm.expect(jsonData.success).to.be.true;",
							"    }",
							"});",
							"",
							"// Limpar vari√°veis do environment",
							"pm.environment.unset('novoLoteId');",
							"pm.environment.unset('loteEndDateTime');",
							"pm.environment.unset('newLoteEndDateTime');"
						],
						"type": "text/javascript"
					}
				}
			],
			"request": {
				"method": "DELETE",
				"header": [
					{
						"key": "Authorization",
						"value": "Bearer {{authToken}}",
						"type": "text"
					},
					{
						"key": "Accept",
						"value": "{{acceptType}}",
						"type": "text"
					}
				],
				"url": {
					"raw": "{{baseUrl}}/api/lotes/{{novoLoteId}}",
					"host": [
						"{{baseUrl}}"
					],
					"path": [
						"api",
						"lotes",
						"{{novoLoteId}}"
					]
				},
				"description": "Exclui um lote do sistema."
			}
		},
		{
			"name": "Criar Lote com Produtos",
			"event": [
				{
					"listen": "test",
					"script": {
						"exec": [
							"pm.test(\"Status code is 200 or 201\", function () {",
							"    pm.expect(pm.response.code).to.be.oneOf([200, 201]);",
							"});",
							"",
							"pm.test(\"Lote with products created\", function () {",
							"    const jsonData = pm.response.json();",
							"    pm.expect(jsonData.data.title).to.equal('Lote Eletr√¥nicos Premium');",
							"    pm.expect(jsonData.data.produtoIds).to.be.an('array');",
							"    ",
							"    pm.environment.set('loteComProdutosId', jsonData.data.id);",
							"});"
						],
						"type": "text/javascript"
					}
				},
				{
					"listen": "prerequest",
					"script": {
						"exec": [
							"// Gerar data de encerramento (10 dias)",
							"const endDate = new Date();",
							"endDate.setDate(endDate.getDate() + 10);",
							"pm.environment.set('loteEletronicosEndDate', endDate.toISOString());",
							"",
							"// Usar produtos eletr√¥nicos se dispon√≠veis",
							"const produtoEletronicoId = pm.environment.get('produtoEletronicoId');",
							"const produtoIds = produtoEletronicoId ? [produtoEletronicoId] : [];",
							"pm.environment.set('produtoIdsEletronicos', JSON.stringify(produtoIds));"
						],
						"type": "text/javascript"
					}
				}
			],
			"request": {
				"method": "POST",
				"header": [
					{
						"key": "Authorization",
						"value": "Bearer {{authToken}}",
						"type": "text"
					},
					{
						"key": "Content-Type",
						"value": "{{contentType}}",
						"type": "text"
					},
					{
						"key": "Accept",
						"value": "{{acceptType}}",
						"type": "text"
					}
				],
				"body": {
					"mode": "raw",
					"raw": "{\n    \"title\": \"Lote Eletr√¥nicos Premium\",\n    \"description\": \"Lote especial de eletr√¥nicos premium criado via Postman. Cont√©m produtos de alta qualidade com garantia estendida. Ideal para colecionadores e entusiastas de tecnologia.\",\n    \"loteEndDateTime\": \"{{loteEletronicosEndDate}}\",\n    \"produtoIds\": {{produtoIdsEletronicos}}\n}"
				},
				"url": {
					"raw": "{{baseUrl}}/api/lotes",
					"host": [
						"{{baseUrl}}"
					],
					"path": [
						"api",
						"lotes"
					]
				},
				"description": "Cria um lote j√° com produtos associados."
			}
		},
		{
			"name": "Buscar Lotes com Filtro",
			"event": [
				{
					"listen": "test",
					"script": {
						"exec": [
							"pm.test(\"Status code is 200\", function () {",
							"    pm.response.to.have.status(200);",
							"});",
							"",
							"pm.test(\"Filtered results match search term\", function () {",
							"    const jsonData = pm.response.json();",
							"    if (jsonData.data.content.length > 0) {",
							"        jsonData.data.content.forEach(lote => {",
							"            const titleMatch = lote.title.toLowerCase().includes('teste');",
							"            const descMatch = lote.description.toLowerCase().includes('teste');",
							"            pm.expect(titleMatch || descMatch).to.be.true;",
							"        });",
							"    }",
							"});"
						],
						"type": "text/javascript"
					}
				}
			],
			"request": {
				"method": "GET",
				"header": [
					{
						"key": "Accept",
						"value": "{{acceptType}}",
						"type": "text"
					}
				],
				"url": {
					"raw": "{{baseUrl}}/api/catalogo/lotes?termo=teste&page=0&size=10",
					"host": [
						"{{baseUrl}}"
					],
					"path": [
						"api",
						"catalogo",
						"lotes"
					],
					"query": [
						{
							"key": "termo",
							"value": "teste"
						},
						{
							"key": "page",
							"value": "0"
						},
						{
							"key": "size",
							"value": "10"
						}
					]
				},
				"description": "Busca lotes p√∫blicos com filtro de termo."
			}
		},
		{
			"name": "Buscar Lote Inexistente",
			"event": [
				{
					"listen": "test",
					"script": {
						"exec": [
							"pm.test(\"Status code is 404\", function () {",
							"    pm.response.to.have.status(404);",
							"});",
							"",
							"pm.test(\"Error message is present\", function () {",
							"    const jsonData = pm.response.json();",
							"    pm.expect(jsonData).to.have.property('success');",
							"    pm.expect(jsonData.success).to.be.false;",
							"    pm.expect(jsonData).to.have.property('message');",
							"});"
						],
						"type": "text/javascript"
					}
				}
			],
			"request": {
				"method": "GET",
				"header": [
					{
						"key": "Authorization",
						"value": "Bearer {{authToken}}",
						"type": "text"
					},
					{
						"key": "Accept",
						"value": "{{acceptType}}",
						"type": "text"
					}
				],
				"url": {
					"raw": "{{baseUrl}}/api/lotes/99999999-9999-9999-9999-999999999999",
					"host": [
						"{{baseUrl}}"
					],
					"path": [
						"api",
						"lotes",
						"99999999-9999-9999-9999-999999999999"
					]
				},
				"description": "Testa busca de lote com ID inexistente."
			}
		}
	],
	"auth": {
		"type": "bearer",
		"bearer": [
			{
				"key": "token",
				"value": "{{authToken}}",
				"type": "string"
			}
		]
	},
	"event": [
		{
			"listen": "prerequest",
			"script": {
				"type": "text/javascript",
				"exec": [
					"// Verificar autentica√ß√£o antes de cada requisi√ß√£o (exceto p√∫blicas)",
					"const requestUrl = pm.request.url.toString();",
					"const isPublicEndpoint = requestUrl.includes('/catalogo/') || requestUrl.includes('/publicos');",
					"",
					"if (!isPublicEndpoint) {",
					"    const authToken = pm.environment.get('authToken');",
					"    if (!authToken) {",
					"        console.log('‚ö†Ô∏è Token de autentica√ß√£o n√£o encontrado. Execute o login de vendedor primeiro.');",
					"    }",
					"}"
				]
			}
		},
		{
			"listen": "test",
			"script": {
				"type": "text/javascript",
				"exec": [
					"// Log global para debug",
					"console.log('üì¶ Lote - Resposta:', pm.response.code, pm.response.status);"
				]
			}
		}
	]
}