spring:
  # Configuração do banco de dados para desenvolvimento
  datasource:
    url: jdbc:mysql://localhost:3306/leilao_db?useSSL=false&allowPublicKeyRetrieval=true&serverTimezone=America/Sao_Paulo
    username: ${DB_USERNAME:leilao_user}
    password: ${DB_PASSWORD:leilao_pass}
    driver-class-name: com.mysql.cj.jdbc.Driver
    hikari:
      maximum-pool-size: 10
      minimum-idle: 5
      connection-timeout: 20000
      idle-timeout: 300000
      max-lifetime: 1200000
      leak-detection-threshold: 60000
  
  # Configuração JPA/Hibernate para desenvolvimento
  jpa:
    hibernate:
      ddl-auto: none # Deixar Flyway gerenciar completamente
    show-sql: true
    properties:
      hibernate:
        dialect: org.hibernate.dialect.MySQLDialect
        format_sql: true
        jdbc:
          time_zone: America/Sao_Paulo
  
  # Configuração Flyway para desenvolvimento
  flyway:
    enabled: true
    locations: classpath:db/migration
    baseline-on-migrate: true
    validate-on-migrate: true
    clean-disabled: false # Permitir clean em desenvolvimento
    # Configurações adicionais para debug
    baseline-version: 0
    baseline-description: "Initial baseline"
    out-of-order: false
    ignore-missing-migrations: false
    ignore-ignored-migrations: false
    ignore-pending-migrations: false
    ignore-future-migrations: false
  
  # Configuração Redis para desenvolvimento
  data:
    redis:
      host: ${REDIS_HOST:localhost}
      port: ${REDIS_PORT:6379}
      password: ${REDIS_PASSWORD:}
      database: 0
      timeout: 2000ms
      lettuce:
        pool:
          max-active: 8
          max-idle: 8
          min-idle: 0
  
  # Configuração de email para desenvolvimento (DESABILITADO)
  mail:
    # Configuração mínima para evitar erros
    host: localhost
    port: 25
    username: 
    password: 
    properties:
      mail:
        smtp:
          auth: false
          starttls:
            enable: false
    # Desabilitar para desenvolvimento
    test-connection: false

# Configurações específicas para desenvolvimento
app:
  # URLs base
  frontend-url: http://localhost:4200
  backend-url: http://localhost:8080
  
  # Configurações de storage (desenvolvimento local)
  storage:
    type: local
    local:
      base-path: ./uploads
      max-file-size: 10MB
  
  # Configurações de pagamento (mock para desenvolvimento)
  payment:
    provider: mock
    mock:
      enabled: true
      success-rate: 0.9
  
  # Configurações de banco específicas
  database:
    show-sql: true
    generate-ddl: false # Flyway gerencia
    auto-create-schema: false
  
  # Configurações de email para desenvolvimento
  email:
    enabled: false # Desabilitar envio de email em desenvolvimento
    mock: true     # Usar mock para testes

# Configurações do Actuator para desenvolvimento
management:
  endpoints:
    web:
      exposure:
        include: health,info,metrics,prometheus
  endpoint:
    health:
      show-details: when_authorized
  health:
    # Desabilitar health checks problemáticos em desenvolvimento
    mail:
      enabled: false
    redis:
      enabled: true
    db:
      enabled: true
  info:
    env:
      enabled: true

# Logging mais verboso para desenvolvimento
logging:
  level:
    com.leilao: DEBUG
    org.springframework.web: DEBUG
    org.springframework.security: DEBUG
    org.hibernate.SQL: DEBUG
    org.hibernate.type.descriptor.sql.BasicBinder: TRACE
    org.flywaydb: DEBUG
    org.flywaydb.core: DEBUG
    org.flywaydb.core.internal: DEBUG
    # Reduzir logs de email para evitar spam
    org.springframework.mail: WARN
    org.springframework.boot.actuate.mail: WARN
  file:
    name: logs/leilao-dev.log
  pattern:
    console: "%d{yyyy-MM-dd HH:mm:ss} [%thread] %-5level %logger{36} - %msg%n"